<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-translate-customization" content="108d9124921d80c3-80e20d618ff053c8-g4f02ec6f3dba68b7-c">
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>[Vue3.js] 새로운 기능 파악하기 | IT 데이터베이스</title>
<meta name="generator" content="Jekyll v4.2.2">
<meta property="og:title" content="[Vue3.js] 새로운 기능 파악하기">
<meta name="author" content="GitHub User">
<meta property="og:locale" content="en_US">
<meta name="description" content="시작으로">
<meta property="og:description" content="시작으로">
<link rel="canonical" href="http://localhost:4000/vue.js/vue3.js/2022/10/09/vue3-01.html">
<meta property="og:url" content="http://localhost:4000/vue.js/vue3.js/2022/10/09/vue3-01.html">
<meta property="og:site_name" content="IT 데이터베이스">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2022-10-09T00:00:00+09:00">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="[Vue3.js] 새로운 기능 파악하기">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"GitHub User"},"dateModified":"2022-10-09T00:00:00+09:00","datePublished":"2022-10-09T00:00:00+09:00","description":"시작으로","headline":"[Vue3.js] 새로운 기능 파악하기","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/vue.js/vue3.js/2022/10/09/vue3-01.html"},"url":"http://localhost:4000/vue.js/vue3.js/2022/10/09/vue3-01.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="shortcut icon" href="">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-noto-sans@0.0.72/index.min.css">
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/image-popup.css">

  <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="/assets/js/main.js"></script>
  <script src="/assets/js/zooming.min.js"></script><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="IT 데이터베이스">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<!-- and it's easy to individually load additional languages -->
<script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/go.min.js"></script>



















<script>
// Init highlight js
document.addEventListener('DOMContentLoaded', function(event) {
  var els = document.querySelectorAll('pre code')

  function addLangData(block) {
    var outer = block.parentElement.parentElement.parentElement;
    var lang = block.getAttribute('data-lang');
    for (var i = 0; i < outer.classList.length; i++) {
      var cls = outer.classList[i];
      if (cls.startsWith('language-')) {
        lang = cls;
        break;
      }
    }
    if (!lang) {
      cls = block.getAttribute('class');
      lang = cls ? cls.replace('hljs ', '') : '';
    }
    if (lang.startsWith('language-')) {
      lang = lang.substr(9);
    }
    block.setAttribute('class', 'hljs ' + lang);
    block.parentNode.setAttribute('data-lang', lang);
  }

  function addBadge(block) {
    var enabled = ('true' || 'true').toLowerCase();
    if (enabled == 'true') {
      var pre = block.parentElement;
      pre.classList.add('badge');
    }
  }

  function handle(block) {
    addLangData(block);
    addBadge(block)
    hljs.highlightBlock(block);
  }

  for (var i = 0; i < els.length; i++) {
    var el = els[i];
    handle(el);
  }
});
</script>

<style>
  /* code language badge */
  pre.badge::before {
    content: attr(data-lang);
    color: #fff;
    background-color: #ff4e00;
    padding: 0 .5em;
    border-radius: 0 2px;
    text-transform: uppercase;
    text-align: center;
    min-width: 32px;
    display: inline-block;
    position: absolute;
    right: 0;
  }

  /* fix wrong badge display for firefox browser */
  code > table pre::before {
    display: none;
  }
</style>
</head>
<body>





































































































































<header class="site-header site-header-transparent" role="banner">

  <div class="wrapper">
    <div class="site-header-inner">
<span class="site-brand"><a class="site-brand-inner" rel="author" href="/">
  <img class="site-favicon" title="IT 데이터베이스" src="" onerror="this.style.display='none'">
  IT 데이터베이스
</a>
</span><nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger">
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewbox="0 0 18 15" width="18px" height="15px">
                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
              </svg>
            </span>
          </label>

          <div class="trigger">
<a class="page-link" href="/about.html">ABOUT</a><a class="page-link" href="/archives.html">ARCHIVES</a><a class="page-link" href="/categories.html">CATEGORIES</a><a class="page-link" href="/">HOME</a><a class="page-link" href="/tags.html">TAGS</a>









<span class="page-link">



<div id="google_translate_element" style="display: none;">
</div>

<span class="ct-language">
  <ul class="list-unstyled ct-language-dropdown">
    
      <li>
        <a href="#" class="lang-select" data-lang="en">
          
          <img src="https://cdn.countryflags.com/thumbs/united-states-of-america/flag-400.png" title="English">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="fr">
          
          <img src="https://cdn.countryflags.com/thumbs/france/flag-400.png" title="French">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="zh-CN">
          
          <img src="https://cdn.countryflags.com/thumbs/china/flag-400.png" title="Chinese(Simple)">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ja">
          
          <img src="https://cdn.countryflags.com/thumbs/japan/flag-400.png" title="Japanese">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ko">
          
          <img src="https://cdn.countryflags.com/thumbs/south-korea/flag-400.png" title="Korean">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ru">
          
          <img src="https://cdn.countryflags.com/thumbs/russia/flag-400.png" title="Russian">
          
        </a>
      </li>
    
  </ul>
</span>

<script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'en',
    autoDisplay: false,
    layout: google.translate.TranslateElement.InlineLayout.VERTICAL
  }, 'google_translate_element');

  // Links to cross-origin destinations are unsafe
  var gll = document.getElementsByClassName('goog-logo-link')[0];
  if (gll) {
    gll.setAttribute('rel', 'noopener');
  }

  function restoreLang() {
    var iframe = document.getElementsByClassName('goog-te-banner-frame')[0];
    if (!iframe) return;

    var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
    var restore_el = innerDoc.getElementsByTagName("button");

    for (var i = 0; i < restore_el.length; i++) {
      if (restore_el[i].id.indexOf("restore") >= 0) {
        restore_el[i].click();
        var close_el = innerDoc.getElementsByClassName("goog-close-link");
        close_el[0].click();
        return;
      }
    }
  }

  function triggerHtmlEvent(element, eventName) {
    var event;
    if (document.createEvent) {
      event = document.createEvent('HTMLEvents');
      event.initEvent(eventName, true, true);
      element.dispatchEvent(event);
    } else {
      event = document.createEventObject();
      event.eventType = eventName;
      element.fireEvent('on' + event.eventType, event);
    }
  }

  var googleCombo = document.querySelector("select.goog-te-combo");
  var langSelect = document.querySelector('.ct-language');
  langSelect.addEventListener('click', function(event) {
    if (!event.target) {
      return;
    }

    var selected = document.querySelector('.ct-language .ct-language-selected');
    if (selected) {
      selected.classList.remove('ct-language-selected');
    }

    var target = event.target;
    while (target && target !== langSelect ) {
      if (target.matches('.lang-select')) {
        break;
      }
      target = target.parentElement;
    }

    if (target && target.matches('.lang-select')) {
      var lang = target.getAttribute('data-lang');
      if (googleCombo.value == lang) {
        restoreLang();
      } else {
        target.parentElement.classList.add('ct-language-selected');
        googleCombo.value = lang;
        triggerHtmlEvent(googleCombo, 'change');
      }
    }

    event.preventDefault();
  });
}
</script>

<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</span>
</div>
        </nav>
</div>
  </div>
</header>

<script>
  function initHeader() {
    var lastScrollY = getScrollPos().y;
    var documentElement = document.documentElement;

    function storeScrollData() {
      var y = getScrollPos().y;documentElement.setAttribute("data-header-transparent", "");var scrollStatus = "";

      if (y <= 0) {
        scrollStatus = "top";
      } else if ((window.innerHeight + y) >= document.body.offsetHeight) {
        scrollStatus = "bottom";
      } else {
        var isScrollDown = (y - lastScrollY > 0) ? true : false;
        scrollStatus = isScrollDown ? "down" : "up";
      }

      lastScrollY = y;
      documentElement.setAttribute("data-scroll-status", scrollStatus);
    }

    window.addEventListener('scroll', function(e) {
      storeScrollData();
    });

    storeScrollData();
  }
  document.addEventListener('DOMContentLoaded', initHeader);
</script>


























































































































































<style>
    html .page-banner {
      background: #000;
    }
  </style>
<style>html .page-banner {
      height:  36.8vh;
      min-height: 38vh;
    }
    html[data-scroll-status="top"] .page-banner {
      height: 100vh;
    }
  </style>
<style>
    html .page-banner .page-banner-img > *:first-child {
      opacity: 0.618;
    }

    html[data-theme="dark"] .page-banner .page-banner-img > *:first-child {
      opacity: 0.443724;
    }
  </style>
<style>
    html .page-banner .page-banner-inner > *:first-child > *:nth-child(1) {
      font-size: 3.25em; font-weight: bold; text-decoration: underline
    }
  </style>
<style>
    html .page-banner .page-banner-inner > *:first-child > *:nth-child(2) {
      color: gold
    }
  </style>
<section class="page-banner">
    <div class="page-banner-img">
<div style="background-image: url(/assets/images/banners/vue.png)"></div>
        <img class="img-placeholder" src="/assets/images/banners/vue.png">
</div>
    <div class="wrapper">
      <div class="page-banner-inner">
<header class="post-header">
  <h1 class="post-title p-name" itemprop="name headline">[Vue3.js] 새로운 기능 파악하기</h1>
  <h2 class="post-subtitle"></h2>

  <p class="post-meta">
    <time class="dt-published" datetime="2022-10-09T00:00:00+09:00" itemprop="datePublished"><i class="fa fa-calendar"></i> Oct 09, 2022
    </time>

    
    
































    <span class="post-reading-time left-vsplit"><i class="fa fa-clock-o"></i> About 6 mins</span>
  </p>
<div class="post-tags">
<a class="post-tag" href="/tags.html#Webpack">#Webpack</a><a class="post-tag" href="/tags.html#Babel">#Babel</a><a class="post-tag" href="/tags.html#Node.js">#Node.js</a><a class="post-tag" href="/tags.html#Javascript">#Javascript</a>
</div></header>
</div>
    </div>
  </section><script>
  function hashLocate(hashValue) {
    hashValue = hashValue.replace(/^.*#h-/, '');
    hashValue = decodeURIComponent(hashValue);
    var element = document.getElementById(hashValue);

    if (!element) {
      return;
    }

    var header = document.querySelector('header.site-header');
    var headerRect = header.getBoundingClientRect();
    var headerTop = Math.floor(headerRect.top);
    var headerHeight = Math.floor(headerRect.height);
    var scrollPos = getScrollPos();
    var offsetY = element.offsetTop - (headerTop + headerHeight + 20);

    if (offsetY == scrollPos.y) {
      return;
    }

    if (headerTop == 0  && offsetY > scrollPos.y) {
      offsetY += headerHeight + 2;
    } else if (headerTop < 0  && offsetY < scrollPos.y) {
      offsetY -= headerHeight - 2;
    }

    smoothScrollTo(offsetY);
  }

  // The first event occurred
  window.addEventListener('load', function(event) {
    if (window.location.hash) {
      hashLocate(window.location.hash);
    }
  });

  // The first event occurred
  window.addEventListener('click', function(event) {
    if (event.target.tagName.toLowerCase() == 'a') {
      hashLocate(event.target.getAttribute('href'));
    }
  });
</script>
<div class="theme-toggle">
  <input type="checkbox" id="theme-switch">
  <label for="theme-switch">
    <div class="toggle"></div>
    <div class="names">
      <p class="light">Light</p>
      <p class="dark">Dark</p>
    </div>
  </label>
</div>




<script>
  (function() {
    var sw = document.getElementById('theme-switch');
    var html = document.getElementsByTagName('html')[0];
    var nightModeOption = ('auto' || 'auto').toLowerCase();
    var storage = nightModeOption === 'manual'
        ? localStorage
        : sessionStorage;
    var themeData = loadThemeData();

    function saveThemeData(data) {
      storage.setItem('theme', JSON.stringify(data));
    }

    function loadThemeData() {
      var data = storage.getItem('theme');
      try {
        data = JSON.parse(data ? data : '');
      } catch(e) {
        data = { nightShift: undefined, autoToggleAt: 0 };
        saveThemeData(data);
      }
      return data;
    }

    function handleThemeToggle(nightShift) {
      themeData.nightShift = nightShift;
      saveThemeData(themeData);
      html.dataset.theme = nightShift ? 'dark' : 'light';
      setTimeout(function() {
        sw.checked = nightShift ? true : false;
      }, 50);
    }

    function autoThemeToggle() {
      // Next time point of theme toggle
      var now = new Date();
      var toggleAt = new Date();
      var hours = now.getHours();
      var nightShift = hours >= 19 || hours <=7;

      if (nightShift) {
        if (hours > 7) {
          toggleAt.setDate(toggleAt.getDate() + 1);
        }
        toggleAt.setHours(7);
      } else {
        toggleAt.setHours(19);
      }

      toggleAt.setMinutes(0);
      toggleAt.setSeconds(0);
      toggleAt.setMilliseconds(0)

      var delay = toggleAt.getTime() - now.getTime();

      // auto toggle theme mode
      setTimeout(function() {
        handleThemeToggle(!nightShift);
      }, delay);

      return {
        nightShift: nightShift,
        toggleAt: toggleAt.getTime()
      };
    }

    // Listen the theme toggle event
    sw.addEventListener('change', function(event) {
      handleThemeToggle(event.target.checked);
    });

    if (nightModeOption == 'auto') {
      var data = autoThemeToggle();

      // Toggle theme by local setting
      if (data.toggleAt > themeData.autoToggleAt) {
        themeData.autoToggleAt = data.toggleAt;
        handleThemeToggle(data.nightShift);
      } else {
        handleThemeToggle(themeData.nightShift);
      }
    } else if (nightModeOption == 'manual') {
      handleThemeToggle(themeData.nightShift);
    } else {
      var nightShift = themeData.nightShift;
      if (nightShift === undefined) {
        nightShift = nightModeOption === 'on';
      }
      handleThemeToggle(nightShift);
    }
  })();
</script>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="framework">
  <section class="main">

     <div class="post">
  <section>









<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

    <div class="post-content e-content" itemprop="articleBody">

      <h2 id="시작으로">시작으로</h2>

<p>이직한 회사에서 사용하는 웹 기술 스택이 Vue3이다. 전 회사에서 Vue2를 사용해봤지만 스터디할 시간이 부족하여 실무하면서 그때그때 찾아보면서 스터디를 했다. 
그래도 Vue3가 나온 이유의 대해서 정확하게 알지 못하기 때문에 컨셉, 새로운 기능, 주의해야할 점들을 정리해보려고 한다. 공식문서에 가이드를 보고 리스트업을 시작했다.
모든 기능을 다루기 보다 현업에서 사용하면서 정리하고 싶었던 내용을 중심으로 시작하려고 한다.</p>

<h2 id="vue2의-문제점-개선">Vue2의 문제점 개선</h2>

<p>기존 Vue2의 문제점이라고 하면 크게 <code class="language-plaintext highlighter-rouge">두 가지</code>로 나눌 수 있다.</p>

<h3 id="컴포넌트-코드-재사용성">컴포넌트 코드 재사용성</h3>
<p>요즘 프론트엔드 프레임워크들은 모두 컴포넌트 기반의 UI 개발 방식을 추구한다. 그 이유는 컴포넌트 방식으로 개발하면 코드를 재사용할 수 있고 디버깅도 수월하게 할 수 있기 때문이다.
이전 버전의 Vue는 <code class="language-plaintext highlighter-rouge">믹스인(Mixins)</code>, <code class="language-plaintext highlighter-rouge">슬록(slots)</code>, 하<code class="language-plaintext highlighter-rouge">이 오더 컴포넌트(High Order Components)</code> 3가지 방식을 통해 컴포넌트 코드를 재사용할 수 있었다. 
보통 믹스인을 많이 사용했었는데, 프로젝트 몸집이 커지고 다중으로 상속하게되면 컴포넌트 관리가 어려워졌다. 또한, 믹스인은 컨벤션이 굉장히 중요한 문법이다. 그리고 매개변수를 믹스인을 통해 전달할 수 없기 때문에 코드의 유연성이 떨어졌다.
이번 Vue3의 <code class="language-plaintext highlighter-rouge">컴포지션 API</code>를 사용하게 되면 인스턴스의 특정 기능 단위로 모듈화된 로직을 여러 컴포넌트에서 재사용할 수 있다. 대규모 프로젝트에서 로직의 유연성을 높여준다.</p>

<h3 id="타입스크립트-지원">타입스크립트 지원</h3>
<p>Vue2로 개발을 시작 할 당시, 타입스크립트를 같이 사용하는 것을 권장하지 않았었다. 그 이유는 완벽하게 호환되지 않았다. 그 이유는 Vue.js가 기존의 옵션 API를 중심으로 객체 구조 방식을 사용하기 때문에 타입스크립트를 온전히 사용하기에 한계가 있었다. 타입스크립트는 타입을 명시적으로 선언하지 않아도 추론이 가능해야 하는데 객체 구조 특성상 개발자가 일일이 타입을 정의해 줘야 하기 때문에 개발하는데 어려운 상황이 많았다. 기본적으로 타입스크립트는 객체 구조보다 함수 구조에서 더 많은 이점을 가져올 수 있다.
이번 Vue3가 새롭게 등장하면서 적극적으로 타입스크립트를 지원하기 위해 코드베이스를 타입스크립트로 작성했다고 한다. Vue3은 컴포지션 API와 함께 타입스크립트를 사용하기 위해서 컴포지션 API 내부의 <code class="language-plaintext highlighter-rouge">setup()</code> 함수에서 자동으로 타입을 추론하기 때문에 사용하기 훨씬 수월해졌다.</p>

<h2 id="vue3의-핵심-composition-api">Vue3의 핵심 Composition API</h2>
<p>기존의 vue에서도 컴포넌트를 생성하고 재사용이 가능했었다. 하지만, 위의 문제처럼 대규모 프로젝트에서 수 백, 수 천개의 컴포넌트를 생각하면 충분하지 않았다. 이렇듯 대규모 어플리케이션에서는 <code class="language-plaintext highlighter-rouge">코드의 재사용성</code>이 정말 정말 정말 중요하다!
우선 Composition API 작업을 시작하려면, 실제로 사용할 수 있는 <code class="language-plaintext highlighter-rouge">장소</code>가 필요하다. 그게 Vue 컴포넌트에서는 이 위치를 <code class="language-plaintext highlighter-rouge">setup</code>이라고 부른다.</p>

<h3 id="setup-컴포넌트-옵션">setup 컴포넌트 옵션</h3>
<p>새로운 <code class="language-plaintext highlighter-rouge">setup</code> 컴포넌트 옵션은 컴포넌트가 생성되기 전에, <code class="language-plaintext highlighter-rouge">props</code>가 한번 <code class="language-plaintext highlighter-rouge">resolved</code>될 때 실행된다. 그리고 composition API의 진입점 역할을 한다.
<code class="language-plaintext highlighter-rouge">setup</code>이 실행될 때, 컴포넌트 인스턴스가 아직 생성되지않아 setup 옵션 내에 this가 존재하지 않는다. 즉, <code class="language-plaintext highlighter-rouge">props</code>를 제외하고, 컴포넌트 내 다른 속성에 접근할 수 없다.( <code class="language-plaintext highlighter-rouge">local state</code>, <code class="language-plaintext highlighter-rouge">computed properties</code> 또는 <code class="language-plaintext highlighter-rouge">methods</code>.)</p>

<h3 id="반응형-변수-ref">반응형 변수 ref</h3>
<p>Vue 3.0에서는 다음과 같이 <code class="language-plaintext highlighter-rouge">ref</code> 펑션을 사용하여 어디서나 변수를 반응성있도록 생성할 수 있다.</p>

<div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import { ref } from 'vue'

const counter = ref(0)
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">ref</code>는 전달인자를 받고 반응형 변수의 값에 접근하거나 값을 변경할 수 있는 <code class="language-plaintext highlighter-rouge">value</code> 속성을 가진 객체를 반환한다.</p>

<div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import { ref } from 'vue'

const counter = ref(0)

console.log(counter) // { value: 0 }
console.log(counter.value) // 0

counter.value++
console.log(counter.value) // 1
</code></pre></div></div>

<p>객체 안에 값을 감싸는 것은 불필요할 수 있지만, JavaScript 에서 다른 데이터 타입에 걸쳐 동작을 통일시켜야 한다. JavaScript에서는 <code class="language-plaintext highlighter-rouge">Number</code> 나 <code class="language-plaintext highlighter-rouge">String</code> 과 같은 원시 타입(primitive types)은 참조에 의한 전달(pass by reference)이 아니라 <code class="language-plaintext highlighter-rouge">값에 의한 전달(pass by value)</code>이기 때문이다.</p>

<p>모든 값을 감싸는 래퍼 객체(wrapper object)를 가지고 있으면 어딘가에서 반응성을 잃어버릴 염려없이 전체 앱에서 안전하게 전달할 수 있다.</p>

<p>정리해서, <code class="language-plaintext highlighter-rouge">ref</code> 펑션은 값에 <code class="language-plaintext highlighter-rouge">반응형 참조</code>를 만든다.</p>

<h3 id="setup안에-라이프사이클-훅-등록하기">setup안에 라이프사이클 훅 등록하기</h3>
<p>기존의 option API와 비교하여 Composition API를 완벽하게 만들기 위해서는 setup안에 라이프사이클 훅을 등록하는 방법이 필요하다.
기존의 훅과 동일한 기능을 갖기만 접두사 <code class="language-plaintext highlighter-rouge">on</code>이 붙는다.</p>

<blockquote>
  <p>mounted =&gt; onMounted</p>
</blockquote>

<p>해당 라이프사이클 훅은 컴포넌트에 의해 훅이 호출될 때 실행될 콜백을 받는다.</p>

<p>vue2의 mounted와 동일하게 인스턴트가 마운트된 후에 호출되는 훅이다. 달리 말해 가상 DOM이 실제 DOM에 부착되고 난 이후에 실행되는 펑션이다.</p>

<div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// src/components/UserRepositories.vue `setup` function
import { fetchUserRepositories } from '@/api/repositories'
import { ref, onMounted } from 'vue'

// 컴포넌트 내부
setup (props) {
  const repositories = ref([])
  const getUserRepositories = async () =&gt; {
    repositories.value = await fetchUserRepositories(props.user)
  }

  onMounted(getUserRepositories) // `mounted`에서 `getUserRepositories` 호출

  return {
    repositories,
    getUserRepositories
  }
}
</code></pre></div></div>

<p>해당 컴포넌트가 실행될 때 onMounted 훅을 호출한다.</p>

<p><br></p>

<h2 id="composition-api의-더-쉬운-표현-script-setup">Composition API의 더 쉬운 표현, &lt;script setup&gt;</h2>

<blockquote>
  <p>SFC (single file Component, 싱글 파일 컴포넌트)는 한 파일이 하나의 요소를 정의하는 방식의 컴포넌트이다. 일반적으로 파일에 HTML, 스타일 태그 및 스크립트 태그가 모두 들어있는 파일과 유사하다.
SFC와 Composition API를 모두 사용하는 경우 권장되는 구문이다. 일반적인 &lt;script&gt; 보다 많은 이점을 제공한다.</p>
</blockquote>

<ul>
  <li>더 적은 보일러플레이트로 간결한 코드
    <blockquote>
      <p>보일러플레이트(boilerplate)란 변경 없이 계속해서 재사용할 수 있는 코드를 말한다.</p>
    </blockquote>
  </li>
  <li>순수 타입스크립트를 사용하여 props and emitted event 선언 가능</li>
  <li>더 나은 런타임 성능
    <blockquote>
      <p>템플릿이 중간 프록시 없이 동일한 scope의 렌더링 함수로 컴파일 됨.</p>
    </blockquote>
  </li>
  <li>더 나은 IDE 유형 추론 가능</li>
</ul>

<p>기본적인 구성요소는 다음과 같다.</p>

<div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div&gt;</span> hello world<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span> <span class="na">lang=</span><span class="s">"ts"</span><span class="nt">&gt;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">여기는 타입스크립트를 작성하는 스크립트</span><span class="dl">'</span><span class="p">)</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span> <span class="na">lang=</span><span class="s">"setup"</span><span class="nt">&gt;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">스크립트 setup</span><span class="dl">'</span><span class="p">)</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">setup</code>으로 선언된 <code class="language-plaintext highlighter-rouge">script</code>안에는 컴포넌트 안 setup() 함수로 컴파일 된다. 즉, 컴포넌트를 처음 가져올 때 한 번만 실행되는 setup() 함수와 달리 <code class="language-plaintext highlighter-rouge">&lt;script setup&gt;</code> 안 코드는 컴포넌트가 실행될 때마다 해당 코드가 실행된다.</p>

<h3 id="최상위-바인딩은-템플릿에서-직접-사용-가능하다">최상위 바인딩은 템플릿에서 직접 사용 가능하다.</h3>

<div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="err">@</span><span class="na">click=</span><span class="s">"onClickEvent"</span><span class="nt">&gt;</span> <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div&gt;</span> <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span> <span class="na">lan=</span><span class="s">"setup"</span><span class="nt">&gt;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">anOterFuntion</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">~/util</span><span class="dl">'</span><span class="p">;</span>

  <span class="kd">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">seongsik</span><span class="dl">'</span><span class="p">;</span>

  <span class="kd">const</span> <span class="nx">onClickEvent</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
  <span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">&lt;script setup&gt;</code>안 최상위 바인딩은 템플릿에서 정의된 이름 그대로 사용할 수 있다.</li>
</ul>

<p>이처럼 SFC하나로 모두 정의(impert, composition API, 타입스크립트, CSS) 할 수 있는 것이 가장 큰 장점인 것 같다. 다음에는 SFC의 setup 구문을 더 자세히 다뤄보도록 하자</p>


    </div>

</article>
<div class="post-nav">
<a class="previous" href="/git/2022/08/16/git-12.html" title="[git] OS별 CRLF 새줄 문자 차이 발생 및 해결">[git] OS별 CRLF 새줄 문자 차이...</a><span></span>
</div>
<div class="post-related">
      <div>Related Articles</div>
      <ul>
        <li><a class="post-link" href="/eslint/2022/01/05/eslint-01.html" title="">[ESLint] ESLint 시작하기</a></li>
<li><a class="post-link" href="/vue.js/vue3.js/2022/10/09/vue3-01.html" title="">[Vue3.js] 새로운 기능 파악하기</a></li>
<li><a class="post-link" href="/node.js/2022/02/09/Node.js-03.html" title="">[Node.js] Express API 서버 구축 - 설치 및 실행</a></li>
<li><a class="post-link" href="/git/2022/06/26/git-10.html" title="">[Git] git flow 전략 파악하기</a></li>
</ul>
    </div>
<div class="post-comments"></div></section>
</div>
<script>
  new Zooming().listen('img')
</script>

  </section>
  <section class="sidebar" style="margin-left: 15px;">
    <!-- Get sidebar items --><style type="text/css" media="screen">
.post-menu ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
</style>

<div class="post-menu">
  <div class="post-menu-title">TOC</div>
  <div class="post-menu-content"></div>
</div>

<script>
  function generateContent() {
    var menu = document.querySelector(".post-menu");
    var menuContent =  menu.querySelector(".post-menu-content");
    var headings = document.querySelector(".post-content").querySelectorAll("h2, h3, h4, h5, h6");

    // Hide menu when no headings
    if (headings.length === 0) {
      return menu.style.display = "none";
    }

    // Generate post menu
    var menuHTML = '';
    for (var i = 0; i < headings.length; i++) {
      var h = headings[i];
      menuHTML += (
        '<li class="h-' + h.tagName.toLowerCase() + '">'
        + '<a href="#h-' + h.getAttribute('id') + '">' + h.textContent + '</a></li>');
    }

    menuContent.innerHTML = '<ul>' + menuHTML + '</ul>';

    // The header element
    var header = document.querySelector('header.site-header');

    function doMenuCollapse(index, over_items) {
      var items = menuContent.firstChild.children;

      if (over_items == undefined) {
        over_items = 20;
      }

      if (items.length < over_items) {
        return;
      }

      var activeItem = items[index];
      var beginItem = activeItem
      var endItem = activeItem
      var beginIndex = index;
      var endIndex = index + 1;
      while (beginIndex >= 0
        && !items[beginIndex].classList.contains('h-h2')) {
        beginIndex -= 1;
      }
      while (endIndex < items.length
        && !items[endIndex].classList.contains('h-h2')) {
        endIndex += 1;
      }
      for (var i = 0; i < beginIndex; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
      for (var i = beginIndex + 1; i < endIndex; i++) {
        item = items[i]
        // if (!item.classList.contains('h-h2')) {
          item.style.display = '';
        // }
      }
      for (var i = endIndex; i < items.length; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
    }

    // Init menu collapsed
    doMenuCollapse(-1);

    // Active the menu item
    window.addEventListener('scroll', function (event) {
      var lastActive = menuContent.querySelector('.active');
      var changed = true;
      var activeIndex = -1;
      for (var i = headings.length - 1; i >= 0; i--) {
        var h = headings[i];
        var headingRect = h.getBoundingClientRect();
        var headerRect = header.getBoundingClientRect();
        var headerTop = Math.floor(headerRect.top);
        var headerHeight = Math.floor(headerRect.height);
        var headerHeight = headerTop + headerHeight + 20;
        if (headingRect.top <= headerHeight) {
          var id = 'h-' + h.getAttribute('id');
          var a = menuContent.querySelector('a[href="#' + id  + '"]');
          var curActive = a.parentNode;
          if (curActive) {
            curActive.classList.add('active');
            activeIndex = i;
          }
          if (lastActive == curActive) {
            changed = false;
          }
          break;
        }
      }
      if (changed) {
        if (lastActive) {
          lastActive.classList.remove('active');
        }
        doMenuCollapse(activeIndex);
      }
      event.preventDefault();
    });
  }
  generateContent();
</script>
</section>
</div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">
    <div class="site-footer-inner">
<div>
<span class="copyleft">©</span> 2022 Seo SeongSik. All rights reserved</div>
      <div>Go to <a title="github" href="https://github.com/s-seongsik">Github</a>
</div>
    </div>
  </div>
</footer>
</body>
</html>
